<form class="tdp-column tdp-entity-form" [formGroup]="entityForm">

  <div class="tdp-row">
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.AiepCode' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <input
        [ngClass]="{ 'tdp-form-border-error': checkHasErrorV2('AiepCode') }"
        type="text"
        formControlName="AiepCode">
      <div *ngIf="checkHasErrorV2('AiepCode', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.name' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <input
      [ngClass]="{ 'tdp-form-border-error': checkHasErrorV2('name') }"
      type="text"
      formControlName="name">
      <div *ngIf="checkHasErrorV2('name', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
    </div>
    <div class="tdp-form-group"></div>
  </div>

  <div class="tdp-row">
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.email' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <input
        [ngClass]="{ 'tdp-form-border-error': checkHasErrorV2('email') }"
        type="text"
        formControlName="email">
      <div *ngIf="checkHasErrorV2('email', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
      <div *ngIf="checkHasErrorV2('email', 'email')" class="tdp-form-error">
        {{ 'validationErrors.mustBeEmail' | translate }}
      </div>
    </div>
     <!-- Country selector only for France-->
     <div *ngIf="showCountrySelector">
      <div class="tdp-form-group">
        <label class="tdp-form-group-label">
          {{ 'builder.countrySelector' | translate}}
        </label>
        <tdp-selector-country
        [elementList]="countriesSelectionOptions" 
        [displayDefault]="displayDefault"
        (selectedCountryOption)="selectCountryOptionFunction($event)"
        formControlName="country">
        </tdp-selector-country>
      </div>      
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.postcode' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <tdp-postcode
        [selectedCountry]="selectedCountry"
        [hasError]="checkHasErrorV2('postcode')"
        (selectedAddress)="onSelectedAddress($event)"
        formControlName="postcode">
      </tdp-postcode>
      <div *ngIf="checkHasErrorV2('postcode', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
      <div *ngIf="checkHasErrorV2('postcode', 'invalidPostcode')" class="tdp-form-error">
        {{ 'validationErrors.invalidPostcode' | translate }}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.address1' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <tdp-postcode
        [selectedCountry]="selectedCountry"
        [postcode]="getPostcode()"
        isAddress1="true"
        [hasError]="checkHasErrorV2('address1')"
        (selectedAddress)="onSelectedAddress($event)"
        formControlName="address1">
      </tdp-postcode>
      <div *ngIf="checkHasErrorV2('address1', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
    </div>
  </div>

  <div class="tdp-row">
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.address2' | translate }}
      </label>
      <input
        type="text"
        formControlName="address2">
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.address3' | translate }}
      </label>
      <input
        type="text"
        formControlName="address3">
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.phoneNumber' | translate }}
      </label>
      <input
        type="text"
        formControlName="phoneNumber">
    </div>
  </div>

  <div class="tdp-row">
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.area' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <tdp-autocomplete
        [elementList]="areaNameList"
        formControlName="areaName">
      </tdp-autocomplete>
      <div *ngIf="checkHasErrorV2('areaName', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
      <div *ngIf="checkHasErrorV2('areaName', 'containedInError')" class="tdp-form-error">
        {{ 'validationErrors.valueList' | translate}}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.manager' | translate }}
      </label>
      <tdp-autocomplete
        [elementList]="managerUsernameList"
        formControlName="managerName">
      </tdp-autocomplete>
      <div *ngIf="checkHasErrorV2('managerName', 'containedInError')" class="tdp-form-error">
        {{ 'validationErrors.valueList' | translate}}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.faxNumber' | translate }}
      </label>
      <input
        type="text"
        formControlName="faxNumber">
    </div>
  </div>

  <div class="tdp-row">
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.ipAddress' | translate }}
      </label>
      <input
        type="text"
        formControlName="ipAddress">
      <div *ngIf="checkHasErrorV2('ipAddress', 'pattern')" class="tdp-form-error">
        {{ 'validationErrors.invalidIpAddress' | translate}}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.downloadLimit' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <input
        type="text"
        formControlName="downloadLimit">
      <div *ngIf="checkHasErrorV2('downloadLimit', 'min')" class="tdp-form-error">
        {{ 'validationErrors.min' | translate: { minValue: '0' } }}
      </div>
      <div *ngIf="checkHasErrorV2('downloadLimit', 'max')" class="tdp-form-error">
        {{ 'validationErrors.max' | translate: { maxValue: '100' } }}
      </div>
      <div *ngIf="checkHasErrorV2('downloadLimit', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
    </div>
    <div class="tdp-form-group">
      <label class="tdp-form-group-label">
        {{ 'Aiep.downloadSpeed' | translate }}
        <div class="tdp-required-dot"></div>
      </label>
      <input
        type="text"
        formControlName="downloadSpeed">
      <div *ngIf="checkHasErrorV2('downloadSpeed', 'min')" class="tdp-form-error">
        {{ 'validationErrors.min' | translate: { minValue: '0' } }}
      </div>
      <div *ngIf="checkHasErrorV2('downloadSpeed', 'required')" class="tdp-form-error">
        {{ 'validationErrors.required' | translate }}
      </div>
    </div>
  </div>

  <div class="tdp-row">
    <div class="tdp-form-group">
      <mat-checkbox
        color="warn"
        unchecked
        formControlName="htmlEmail">
        {{ 'Aiep.htmlEmail' | translate }}
      </mat-checkbox>
    </div>
    <div class="tdp-form-group"></div>
    <div class="tdp-form-group"></div>
  </div>

</form>

<div class="tdp-row tdp-entity-form-actions">
  <ng-container *ngIf="!Aiep; else editButtons">
    <button
      (click)="goBack()"
      class="tdp-secondary-btn">
      {{ 'button.cancel' | translate }}
      <i class="fas fa-times"></i>
    </button>
    <button
      [disabled]="!entityForm.valid"
      (click)="submitForm()"
      class="tdp-primary-btn">
      {{ 'button.createAiep' | translate }}
      <i class="fas fa-plus"></i>
    </button>
  </ng-container>
  <ng-template #editButtons>
    <button
      *ngIf="!editing"
      class="tdp-secondary-btn"
      (click)="enableEdit()">
      {{ 'button.edit' | translate }}
      <i class="fas fa-pen"></i>
    </button>
    <button
      *ngIf="editing"
      (click)="cancelEdit(Aiep)"
      class="tdp-secondary-btn">
      {{ 'button.cancel' | translate }}
      <i class="fas fa-times"></i>
    </button>
    <button
      *ngIf="editing"
      [disabled]="!entityForm.valid"
      (click)="submitForm()"
      class="tdp-primary-btn">
      {{ 'button.save' | translate }}
      <i class="fas fa-plus"></i>
    </button>
  </ng-template>
</div>
